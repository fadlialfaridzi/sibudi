<%- include('../partials/header-simple') %>

<link rel="stylesheet" href="/css/animasi3d.css" />

<body class="bg-white min-h-screen flex flex-col">
    <!-- Navbar -->
    <%- include('../partials/navbarOutside') %>

    <!-- ======================
       KONTEN UTAMA
  ======================= -->
    <main class="flex flex-col items-center justify-start min-h-screen p-4 lg:p-10 gap-10 max-w-screen-2xl mx-auto w-full pt-24 lg:pt-32">
        <!-- ======================
         SECTION 1 & 2 — INFORMASI PEMINJAM + INFOGRAFIS
    ======================= -->
        <section class="w-full grid grid-cols-1 lg:grid-cols-3 gap-8 items-stretch">
            <!-- ======== INFORMASI PEMINJAM (2/3 lebar) ======== -->
            <div class="lg:col-span-2 bg-white border border-gray-200 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 flex flex-col">
                <div class="text-center border-b border-gray-100 p-6">
                    <h2 class="text-3xl font-bold text-gray-900">Informasi Peminjam</h2>
                    <p class="text-gray-600 text-sm mt-2">Detail akun aktif yang sedang login ke sistem</p>
                </div>

                <div class="flex flex-col md:flex-row items-center md:items-start p-6 gap-6 flex-1">
                    <!-- Icon Profil -->
                    <div class="flex-shrink-0">
                        <div class="w-20 h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center shadow-md text-white text-3xl font-bold">
                            <%= user.name ? user.name.charAt(0).toUpperCase() : "U" %>
                        </div>
                    </div>

                    <!-- Informasi User -->
                    <div class="flex-1 text-center md:text-left space-y-2">
                        <h3 class="text-2xl font-semibold text-gray-800"><%= user.name %></h3>
                        <p class="text-sm text-gray-500">
                            <i class="fa-solid fa-envelope mr-1 text-green-500"></i>
                            <%= user.email %>
                        </p>
                        <p class="text-sm text-gray-500">
                            <i class="fa-solid fa-id-card mr-1 text-green-500"></i>
                            ID Anggota: <%= user.member_id %>
                        </p>
                        <div class="mt-4 inline-flex items-center gap-2 bg-green-50 border border-green-200 text-green-700 text-sm font-medium px-3 py-1 rounded-full shadow-sm">
                            <i class="fa-solid fa-user-tag text-green-500"></i>
                            <span><%= user.memberType %></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ======== INFOGRAFIS PEMINJAMAN (1/3 lebar) ======== -->
            <div class="bg-white border border-gray-200 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 flex flex-col justify-center items-center p-8 text-center">
                <h2 class="text-2xl font-bold text-gray-900 mb-3">Infografis Peminjaman</h2>
                <p class="text-gray-600 text-sm mb-6">Unduh panduan visual peminjaman buku di SIBUDI.</p>

                <a href="/downloads/infografis_peminjaman.pdf" download class="inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-5 py-3 rounded-xl text-sm font-medium transition-all">
                    <i class="fa-solid fa-download"></i>
                    Unduh Infografis
                </a>
            </div>
        </section>

        <!-- ======================
 SECTION 2 — ATURAN PEMINJAMAN
======================= -->
        <section class="w-full max-w-6xl mx-auto mt-16 px-4">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">Daftar Aturan Peminjaman</h2>
                <p class="text-gray-600 text-sm mt-2">Berikut adalah ketentuan peminjaman berdasarkan tipe koleksi</p>
            </div>

            <% if (loanRules && loanRules.length > 0) { %>
            <!-- Kontainer card -->
            <div class="flex flex-wrap justify-center gap-8 items-stretch">
                <% loanRules.forEach(rule => { %>
                <div class="bg-white border border-gray-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-all duration-300 w-80 flex flex-col justify-between">
                    <div>
                        <h3 class="text-xl font-semibold text-green-700 mb-3 text-center">
                            <i class="fa-solid fa-book-open mr-2"></i>
                            <%= rule.coll_type_name || 'Tipe Koleksi Tidak Dikenal' %>
                        </h3>
                        <ul class="text-gray-600 text-sm space-y-1">
                            <li><strong>Durasi Pinjam:</strong> <%= rule.loan_periode %> hari</li>
                            <li><strong>Batas Buku:</strong> <%= rule.loan_limit %> buku</li>
                            <li><strong>Batas Perpanjangan:</strong> <%= rule.reborrow_limit %> kali</li>
                            <li><strong>Denda per Hari:</strong> Rp <%= rule.fine_each_day %></li>
                            <li><strong>Masa Tenggang:</strong> <%= rule.grace_periode %> hari</li>
                        </ul>
                    </div>
                    <div class="mt-5 text-center">
                        <span class="inline-flex items-center gap-2 bg-green-50 border border-green-200 text-green-700 text-xs font-medium px-3 py-1 rounded-full shadow-sm">
                            <i class="fa-solid fa-tags text-green-500"></i>
                            <%= user.memberType %>
                        </span>
                    </div>
                </div>
                <% }) %>
            </div>
            <% } else { %>
            <p class="text-center text-gray-400 italic">Belum ada aturan peminjaman yang tersedia.</p>
            <% } %>
        </section>
    </main>

    <!-- Popup -->
    <%- include('../partials/popup', { popup: popup }) %>

    <!-- Scripts -->
    <script src="/js/main.js"></script>
    <script src="/js/popup.js"></script>
</body>

<%- include('../partials/footer-simple') %>
