<%- include('../partials/header-simple') %>
<link rel="stylesheet" href="/css/animasi3d.css" />

<body class="bg-gradient-to-br from-green-50 via-white to-yellow-50 font-['Inter'] min-h-screen">
    <!-- Navbar -->
    <%- include('../partials/navbarOutside') %>

    <main class="pt-24 pb-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
        <!-- ======================
         SECTION 1 — INFO PEMINJAM + INFOGRAFIS
    ======================= -->
        <section class="grid grid-cols-1 lg:grid-cols-10 gap-8 mb-16 items-stretch">
            <div class="lg:col-span-1"></div>
            <!-- Informasi Peminjam -->
            <div class="lg:col-span-4 bg-white rounded-2xl shadow-xl border border-green-100 hover:shadow-2xl transition-all duration-500 p-8">
                <div class="text-center border-b border-gray-100 pb-4 mb-6">
                    <h2 class="text-3xl font-bold text-[#2F7A33]"><i class="fa-solid fa-user-circle mr-2"></i>Informasi Peminjam</h2>
                    <p class="text-gray-600 text-sm mt-2">Data akun aktif yang sedang login di sistem</p>
                </div>

                <div class="flex flex-col md:flex-row items-center gap-8">
                    <!-- Avatar -->
                    <div class="relative">
                        <div class="w-24 h-24 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white text-4xl font-bold shadow-lg">
                            <%= user.name ? user.name.charAt(0).toUpperCase() : "U" %>
                        </div>
                        <div class="absolute -bottom-2 -right-2 w-8 h-8 bg-[#FFD700] rounded-full flex items-center justify-center shadow-md text-[#2F7A33]">
                            <i class="fa-solid fa-id-card text-sm"></i>
                        </div>
                    </div>

                    <!-- Detail -->
                    <div class="flex-1 text-center md:text-left space-y-2">
                        <h3 class="text-2xl font-semibold text-gray-800"><%= user.name %></h3>
                        <p class="text-sm text-gray-500"><i class="fa-solid fa-envelope text-green-500 mr-2"></i><%= user.email %></p>
                        <p class="text-sm text-gray-500"><i class="fa-solid fa-id-badge text-green-500 mr-2"></i>ID Anggota: <%= user.member_id %></p>
                        <div class="inline-flex items-center gap-2 mt-3 bg-green-50 border border-green-200 text-green-700 text-sm font-medium px-3 py-1 rounded-full shadow-sm">
                            <i class="fa-solid fa-user-tag text-green-500"></i>
                            <span><%= user.memberType %></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Infografis -->
            <div class="lg:col-span-4 rounded-2xl border border-green-100 shadow-xl hover:shadow-2xl transition-all duration-500 flex flex-col items-center justify-center text-center p-8">
                <div class="w-20 h-20 bg-gradient-to-br from-yellow-300 to-yellow-400 rounded-full flex items-center justify-center mb-4 shadow-md">
                    <i class="fa-solid fa-chart-pie text-3xl text-[#2F7A33]"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 mb-2">Infografis Peminjaman</h2>
                <p class="text-gray-600 text-sm mb-6">Panduan visual tata cara peminjaman buku di SIBUDI.</p>
                <a href="/downloads/infografis_peminjaman.pdf" download class="inline-flex items-center gap-2 bg-[#2F7A33] hover:bg-[#256328] text-white px-6 py-3 rounded-xl font-medium shadow-lg transition-all">
                    <i class="fa-solid fa-download"></i> Unduh Infografis
                </a>
            </div>
        </section>

        <!-- ======================
         SECTION 2 — DAFTAR ATURAN PEMINJAMAN
    ======================= -->
        <section class="w-full text-center">
            <div class="mb-10">
                <h2 class="text-3xl font-bold text-[#2F7A33] mb-2">
                    <i class="fa-solid fa-book-open-reader mr-2"></i>
                    Daftar Aturan Peminjaman
                </h2>
                <p class="text-gray-600">Ketentuan berlaku berdasarkan tipe koleksi dan tipe anggota</p>
            </div>

            <% if (loanRules && loanRules.length > 0) { %>
            <div class="flex flex-wrap justify-center gap-8 items-stretch">
                <% loanRules.forEach(rule => { %>
                <div class="bg-white border border-green-100 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 w-80 overflow-hidden flex flex-col justify-between relative group">
                    <!-- Header -->
                    <div class="bg-gradient-to-r from-[#2F7A33] to-[#256328] text-white text-center py-4">
                        <h3 class="text-lg font-semibold tracking-wide flex items-center justify-center gap-2">
                            <i class="fa-solid fa-book"></i>
                            <%= rule.coll_type_name || 'Tipe Koleksi Tidak Dikenal' %>
                        </h3>
                    </div>

                    <!-- Body -->
                    <div class="p-6 text-left text-sm text-gray-700 space-y-2">
                        <p><i class="fa-solid fa-clock text-green-600 w-5"></i> <strong>Durasi Pinjam:</strong> <%= rule.loan_periode %> hari</p>
                        <p><i class="fa-solid fa-layer-group text-green-600 w-5"></i> <strong>Batas Buku:</strong> <%= rule.loan_limit %> buku</p>
                        <p><i class="fa-solid fa-arrows-rotate text-green-600 w-5"></i> <strong>Perpanjangan:</strong> <%= rule.reborrow_limit %> kali</p>
                        <p><i class="fa-solid fa-money-bill-wave text-green-600 w-5"></i> <strong>Denda:</strong> Rp <%= rule.fine_each_day %> /hari</p>
                        <!-- <p><i class="fa-solid fa-hourglass-half text-green-600 w-5"></i> <strong>Masa Tenggang:</strong> <%= rule.grace_periode %> hari</p> -->
                    </div>

                    <!-- Footer -->
                    <div class="bg-green-50 border-t border-green-100 py-3 text-center">
                        <span class="inline-flex items-center gap-2 bg-white border border-green-200 text-green-700 text-xs font-semibold px-3 py-1 rounded-full shadow-sm">
                            <i class="fa-solid fa-user-graduate text-green-500"></i>
                            <%= user.memberType %>
                        </span>
                    </div>
                </div>
                <% }) %>
            </div>
            <% } else { %>
            <div class="mt-10">
                <div class="bg-white p-10 rounded-2xl shadow-lg inline-block">
                    <i class="fa-solid fa-circle-exclamation text-yellow-500 text-4xl mb-3"></i>
                    <p class="text-gray-500 italic">Belum ada aturan peminjaman yang tersedia untuk tipe anggota ini.</p>
                </div>
            </div>
            <% } %>
        </section>
    </main>

    <!-- Popup -->
    <%- include('../partials/popup', { popup: popup }) %>

    <script src="/js/main.js"></script>
    <script src="/js/popup.js"></script>
</body>
<%- include('../partials/footer-simple') %>
